(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{3461:function(e,t,s){Promise.resolve().then(s.bind(s,5645))},5645:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p},dynamic:function(){return y}});var r=s(1545),n=s(9339),a=s(6573),c=s(6985),i=s(4955),o=s(8653),l=s(6433),d=s(3344),u=s(6425),h=s(7715),m=s(574);let x=(0,s(1105).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var f=s(4238);let y="force-dynamic";function p(){let e=(0,c.useRouter)(),{data:t,isLoading:s,error:n,refetch:m}=(0,a.a)({queryKey:["threads"],queryFn:()=>i.h.getThreads(50)}),x=(null==t?void 0:t.data)||[],f=async()=>{await m()};return n?(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)("header",{className:"bg-card border-b border-border p-4 safe-area-top",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-6 w-6 text-primary mr-2"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-foreground",children:"Threads"})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 text-destructive mb-4"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"Connection Error"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Unable to load threads. Check your connection and try again."}),(0,r.jsx)("button",{onClick:()=>m(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg touch-target",children:"Retry"})]}),(0,r.jsx)(o.K,{})]}):(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)("header",{className:"bg-card border-b border-border p-4 safe-area-top",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-6 w-6 text-primary mr-2"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-foreground",children:"Threads"})]}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[x.length," ",1===x.length?"thread":"threads"]})]})}),(0,r.jsx)(l.t,{onRefresh:f,children:(0,r.jsx)("div",{className:"p-4 pb-20",children:s?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(h.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===x.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,r.jsx)(d.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"No threads yet"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"Threads are created when you start sessions or continue conversations with Amp."}),(0,r.jsx)("button",{onClick:()=>e.push("/sessions/new"),className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg touch-target font-medium",children:"Start a Session"})]}):(0,r.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,r.jsx)(g,{thread:e},e.id))})})}),(0,r.jsx)(o.K,{})]})}function g(e){let{thread:t}=e,s={active:m.Z,completed:x,error:u.Z}[t.status]||m.Z,a=new Date(t.lastMessageAt).toLocaleDateString();return(0,r.jsx)(n.default,{href:"/threads/".concat(t.id),className:"block mobile-tap",children:(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4 shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-foreground truncate",children:t.title}),(0,r.jsxs)("div",{className:"flex items-center mt-1 space-x-2 text-xs text-muted-foreground",children:[(0,r.jsx)(s,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:(0,f.W)("font-medium","active"===t.status&&"text-blue-600","completed"===t.status&&"text-green-600","error"===t.status&&"text-red-600"),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground flex-shrink-0 ml-2",children:a})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),t.messageCount," message",1!==t.messageCount?"s":""]}),t.model&&(0,r.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-0.5 rounded",children:t.model})]})]})})}},8653:function(e,t,s){"use strict";s.d(t,{K:function(){return h}});var r=s(1545),n=s(9339),a=s(6985),c=s(1598),i=s(3784),o=s(3344),l=s(5590),d=s(4238);let u=[{href:"/",icon:c.Z,label:"Sessions"},{href:"/sessions/new",icon:i.Z,label:"New"},{href:"/threads",icon:o.Z,label:"Threads"},{href:"/settings",icon:l.Z,label:"Settings"}];function h(){let e=(0,a.usePathname)();return(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-card border-t border-border safe-area-bottom",children:(0,r.jsx)("div",{className:"flex",children:u.map(t=>{let{href:s,icon:a,label:c}=t,i=e===s||"/"!==s&&e.startsWith(s);return(0,r.jsxs)(n.default,{href:s,className:(0,d.W)("flex-1 flex flex-col items-center justify-center py-2 px-1 touch-target mobile-tap","transition-colors duration-200",i?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(a,{className:"h-5 w-5 mb-1"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:c})]},s)})})})}},6433:function(e,t,s){"use strict";s.d(t,{t:function(){return i}});var r=s(1545),n=s(7224);let a=(0,s(1105).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var c=s(4238);function i(e){let{onRefresh:t,children:s,threshold:i=80}=e,o=(0,n.useRef)(null),[l,d]=(0,n.useState)(0),[u,h]=(0,n.useState)(!1),[m,x]=(0,n.useState)(0),f=(0,n.useRef)(!1),y=(0,n.useCallback)(async()=>{if(!u){h(!0);try{await t()}finally{h(!1),d(0)}}},[t,u]),p=(0,n.useCallback)(e=>{let t=o.current;t&&0===t.scrollTop&&(x(e.touches[0].clientY),f.current=!0)},[]),g=(0,n.useCallback)(e=>{if(!f.current||u)return;let t=o.current;if(!t||t.scrollTop>0){f.current=!1,d(0);return}let s=Math.max(0,e.touches[0].clientY-m);if(s>0){e.preventDefault();let t=Math.min(s/i,1);d(Math.min(s*(1-.5*t),1.5*i))}},[m,i,u]),v=(0,n.useCallback)(()=>{f.current&&(f.current=!1,l>=i&&!u?y():d(0))},[l,i,u,y]);(0,n.useEffect)(()=>{let e=o.current;if(e)return e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("touchmove",g,{passive:!1}),e.addEventListener("touchend",v),()=>{e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",g),e.removeEventListener("touchend",v)}},[p,g,v]);let b=Math.min(l/i,1),j=l>0||u;return(0,r.jsxs)("div",{ref:o,className:"flex-1 overflow-auto mobile-scroll",children:[(0,r.jsx)("div",{className:(0,c.W)("flex items-center justify-center transition-all duration-200",j?"opacity-100":"opacity-0"),style:{height:Math.max(l,u?60:0),transform:"translateY(".concat(u?0:-20,"px)")},children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(a,{className:(0,c.W)("h-5 w-5 text-muted-foreground transition-transform duration-200",(u||b>=1)&&"animate-spin"),style:{transform:"rotate(".concat(180*b,"deg)")}}),(0,r.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:u?"Refreshing...":b>=1?"Release to refresh":"Pull to refresh"})]})}),(0,r.jsx)("div",{style:{transform:"translateY(".concat(l,"px)"),transition:f.current?"none":"transform 0.3s ease"},children:s})]})}},4955:function(e,t,s){"use strict";s.d(t,{h:function(){return a}});let r=s(660).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),r={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,r);if(!e.ok){let t=await e.text();throw Error("HTTP ".concat(e.status,": ").concat(t))}return{data:await e.json(),success:!0}}catch(t){return console.error("API request failed: ".concat(e),t),{data:null,success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async health(){return this.request("/health")}async getSessions(){return this.request("/api/v1/sessions")}async getSession(e){return this.request("/api/v1/sessions/".concat(e))}async createSession(e){return this.request("/api/v1/sessions",{method:"POST",body:JSON.stringify(e)})}async iterateSession(e,t){return this.request("/api/v1/sessions/".concat(e,"/iterate"),{method:"POST",body:JSON.stringify(t)})}async abortSession(e){return this.request("/api/v1/sessions/".concat(e,"/abort"),{method:"POST"})}async mergeSession(e){return this.request("/api/v1/sessions/".concat(e,"/merge"),{method:"POST"})}async getSessionDiff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return this.request("/api/v1/sessions/".concat(e,"/diff?format=").concat(t))}async getThreads(e){return this.request("/api/v1/threads".concat(e?"?limit=".concat(e):""))}async getThreadMessages(e){return this.request("/api/v1/threads/".concat(e,"/messages"))}async addThreadMessage(e,t){return this.request("/api/v1/threads/".concat(e,"/messages"),{method:"POST",body:JSON.stringify(t)})}async getRepositories(){return this.request("/api/v1/repos")}async scanRepositories(e){return this.request("/api/v1/repos/scan",{method:"POST",body:JSON.stringify({roots:e})})}async cloneRepository(e,t){return this.request("/api/v1/repos/clone",{method:"POST",body:JSON.stringify({url:e,path:t})})}async getConfigs(){return this.request("/api/v1/configs")}constructor(e=r){this.baseUrl=e}}let a=new n},6425:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},574:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7715:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},function(e){e.O(0,[281,718,573,644,844,744],function(){return e(e.s=3461)}),_N_E=e.O()}]);