(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2764:function(e,t,s){Promise.resolve().then(s.bind(s,2412))},2412:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v},dynamic:function(){return b}});var r=s(1545),n=s(6573),a=s(6985),i=s(4955),c=s(9339),o=s(4238),l=s(6425),d=s(8110);let u=(0,s(1105).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var h=s(574);function m(e){let{status:t}=e;return(0,r.jsxs)("span",{className:(0,o.W)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100":"idle"===t,"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":"running"===t,"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"awaiting-input"===t,"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"error"===t,"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"done"===t}),children:["running"===t&&(0,r.jsx)("div",{className:"animate-pulse-soft mr-1.5 h-2 w-2 rounded-full bg-current"}),"error"===t&&(0,r.jsx)(l.Z,{className:"mr-1 h-3 w-3"}),t.charAt(0).toUpperCase()+t.slice(1).replace("-"," ")]})}function x(e){var t;let{session:s}=e,n=s.repoRoot.split("/").pop()||"Unknown",a=new Date(s.lastRun||s.createdAt).toLocaleDateString(),i=(null===(t=s.iterations)||void 0===t?void 0:t.length)||0;return(0,r.jsx)(c.default,{href:"/sessions/".concat(s.id),className:"block mobile-tap",children:(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4 shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-foreground truncate",children:s.name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),n]})]}),(0,r.jsx)(m,{status:s.status})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:s.ampPrompt}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u,{className:"h-3 w-3 mr-1"}),a]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),i," iteration",1!==i?"s":""]})]}),s.baseBranch&&(0,r.jsx)("div",{className:"mt-2 pt-2 border-t border-border",children:(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Branch: ",(0,r.jsx)("code",{className:"font-mono",children:s.branchName||s.baseBranch})]})})]})})}var f=s(6433),y=s(8653),p=s(1603),g=s(7715);let b="force-dynamic";function v(){let e=(0,a.useRouter)(),{data:t,isLoading:s,error:c,refetch:o}=(0,n.a)({queryKey:["sessions"],queryFn:()=>i.h.getSessions()}),d=(null==t?void 0:t.data)||[],u=async()=>{await o()};return c?(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[(0,r.jsx)(l.Z,{className:"h-12 w-12 text-destructive mb-4"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"Connection Error"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Unable to connect to the Amp server. Make sure the server is running and accessible."}),(0,r.jsx)("button",{onClick:()=>o(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg touch-target",children:"Retry"}),(0,r.jsx)(y.K,{})]}):(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)("header",{className:"bg-card border-b border-border p-4 safe-area-top",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{className:"h-6 w-6 text-primary mr-2"}),(0,r.jsx)("h1",{className:"text-xl font-bold text-foreground",children:"Sessions"})]})}),(0,r.jsx)(f.t,{onRefresh:u,children:(0,r.jsx)("div",{className:"p-4 pb-20",children:s?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(g.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===d.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,r.jsx)(p.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"No sessions yet"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"Create your first Amp session to get started with AI-powered coding."}),(0,r.jsx)("button",{onClick:()=>e.push("/sessions/new"),className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg touch-target font-medium",children:"Create Session"})]}):(0,r.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,r.jsx)(x,{session:e},e.id))})})}),(0,r.jsx)(y.K,{})]})}},8653:function(e,t,s){"use strict";s.d(t,{K:function(){return h}});var r=s(1545),n=s(9339),a=s(6985),i=s(1598),c=s(3784),o=s(3344),l=s(5590),d=s(4238);let u=[{href:"/",icon:i.Z,label:"Sessions"},{href:"/sessions/new",icon:c.Z,label:"New"},{href:"/threads",icon:o.Z,label:"Threads"},{href:"/settings",icon:l.Z,label:"Settings"}];function h(){let e=(0,a.usePathname)();return(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-card border-t border-border safe-area-bottom",children:(0,r.jsx)("div",{className:"flex",children:u.map(t=>{let{href:s,icon:a,label:i}=t,c=e===s||"/"!==s&&e.startsWith(s);return(0,r.jsxs)(n.default,{href:s,className:(0,d.W)("flex-1 flex flex-col items-center justify-center py-2 px-1 touch-target mobile-tap","transition-colors duration-200",c?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(a,{className:"h-5 w-5 mb-1"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:i})]},s)})})})}},6433:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var r=s(1545),n=s(7224);let a=(0,s(1105).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var i=s(4238);function c(e){let{onRefresh:t,children:s,threshold:c=80}=e,o=(0,n.useRef)(null),[l,d]=(0,n.useState)(0),[u,h]=(0,n.useState)(!1),[m,x]=(0,n.useState)(0),f=(0,n.useRef)(!1),y=(0,n.useCallback)(async()=>{if(!u){h(!0);try{await t()}finally{h(!1),d(0)}}},[t,u]),p=(0,n.useCallback)(e=>{let t=o.current;t&&0===t.scrollTop&&(x(e.touches[0].clientY),f.current=!0)},[]),g=(0,n.useCallback)(e=>{if(!f.current||u)return;let t=o.current;if(!t||t.scrollTop>0){f.current=!1,d(0);return}let s=Math.max(0,e.touches[0].clientY-m);if(s>0){e.preventDefault();let t=Math.min(s/c,1);d(Math.min(s*(1-.5*t),1.5*c))}},[m,c,u]),b=(0,n.useCallback)(()=>{f.current&&(f.current=!1,l>=c&&!u?y():d(0))},[l,c,u,y]);(0,n.useEffect)(()=>{let e=o.current;if(e)return e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("touchmove",g,{passive:!1}),e.addEventListener("touchend",b),()=>{e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",g),e.removeEventListener("touchend",b)}},[p,g,b]);let v=Math.min(l/c,1),j=l>0||u;return(0,r.jsxs)("div",{ref:o,className:"flex-1 overflow-auto mobile-scroll",children:[(0,r.jsx)("div",{className:(0,i.W)("flex items-center justify-center transition-all duration-200",j?"opacity-100":"opacity-0"),style:{height:Math.max(l,u?60:0),transform:"translateY(".concat(u?0:-20,"px)")},children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(a,{className:(0,i.W)("h-5 w-5 text-muted-foreground transition-transform duration-200",(u||v>=1)&&"animate-spin"),style:{transform:"rotate(".concat(180*v,"deg)")}}),(0,r.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:u?"Refreshing...":v>=1?"Release to refresh":"Pull to refresh"})]})}),(0,r.jsx)("div",{style:{transform:"translateY(".concat(l,"px)"),transition:f.current?"none":"transform 0.3s ease"},children:s})]})}},4955:function(e,t,s){"use strict";s.d(t,{h:function(){return a}});let r=s(660).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),r={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,r);if(!e.ok){let t=await e.text();throw Error("HTTP ".concat(e.status,": ").concat(t))}return{data:await e.json(),success:!0}}catch(t){return console.error("API request failed: ".concat(e),t),{data:null,success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async health(){return this.request("/health")}async getSessions(){return this.request("/api/v1/sessions")}async getSession(e){return this.request("/api/v1/sessions/".concat(e))}async createSession(e){return this.request("/api/v1/sessions",{method:"POST",body:JSON.stringify(e)})}async iterateSession(e,t){return this.request("/api/v1/sessions/".concat(e,"/iterate"),{method:"POST",body:JSON.stringify(t)})}async abortSession(e){return this.request("/api/v1/sessions/".concat(e,"/abort"),{method:"POST"})}async mergeSession(e){return this.request("/api/v1/sessions/".concat(e,"/merge"),{method:"POST"})}async getSessionDiff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return this.request("/api/v1/sessions/".concat(e,"/diff?format=").concat(t))}async getThreads(e){return this.request("/api/v1/threads".concat(e?"?limit=".concat(e):""))}async getThreadMessages(e){return this.request("/api/v1/threads/".concat(e,"/messages"))}async addThreadMessage(e,t){return this.request("/api/v1/threads/".concat(e,"/messages"),{method:"POST",body:JSON.stringify(t)})}async getRepositories(){return this.request("/api/v1/repos")}async scanRepositories(e){return this.request("/api/v1/repos/scan",{method:"POST",body:JSON.stringify({roots:e})})}async cloneRepository(e,t){return this.request("/api/v1/repos/clone",{method:"POST",body:JSON.stringify({url:e,path:t})})}async getConfigs(){return this.request("/api/v1/configs")}constructor(e=r){this.baseUrl=e}}let a=new n},6425:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},574:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8110:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},7715:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1603:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1105).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}},function(e){e.O(0,[281,718,573,644,844,744],function(){return e(e.s=2764)}),_N_E=e.O()}]);