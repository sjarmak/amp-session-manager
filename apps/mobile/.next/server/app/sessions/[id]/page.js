(()=>{var e={};e.id=899,e.ids=[899],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4012:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var r=t(7808),a=t(91),n=t(5497),i=t.n(n),d=t(3319),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);t.d(s,o);let l=["",{children:["sessions",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5668)),"/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/sessions/[id]/page.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.bind(t,3969)),"/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/sessions/[id]/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6707)),"/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,3762)),"/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1395)),"/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/not-found.tsx"]}],c=["/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/sessions/[id]/page.tsx"],m="/sessions/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/sessions/[id]/page",pathname:"/sessions/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7788:(e,s,t)=>{Promise.resolve().then(t.bind(t,2068))},8119:(e,s,t)=>{Promise.resolve().then(t.bind(t,5089))},2068:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(6252);function a(){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[r.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"404"}),r.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Session not found"}),r.jsx("button",{onClick:()=>window.history.back(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg",children:"Go Back"})]})}},5089:(e,s,t)=>{"use strict";t.d(s,{SessionDetailClient:()=>j});var r=t(6252),a=t(5706),n=t(7937),i=t(319),d=t(2879),o=t(5041),l=t(903);let c=(0,l.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),m=(0,l.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),x=(0,l.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var u=t(9574),p=t(56);let h=(0,l.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),b=(0,l.Z)("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),f=(0,l.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var g=t(8639);function j({id:e}){let s=(0,i.useRouter)(),[t,l]=(0,a.useState)("live"),{data:f,isLoading:j}=(0,n.a)({queryKey:["session",e],queryFn:()=>d.h.getSession(e),enabled:!!e}),w=f?.data;if(j)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full"})});if(!w)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen p-4",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Session Not Found"}),r.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"The session you're looking for doesn't exist or has been deleted."}),r.jsx("button",{onClick:()=>s.push("/"),className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg",children:"Go Home"})]});let P=[{id:"live",label:"Live",icon:c},{id:"diff",label:"Diff",icon:m},{id:"metrics",label:"Metrics",icon:x},{id:"history",label:"History",icon:u.Z}],M={idle:"text-gray-600",running:"text-blue-600","awaiting-input":"text-yellow-600",error:"text-red-600",done:"text-green-600"}[w.status];return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsxs)("header",{className:"bg-card border-b border-border p-4 safe-area-top",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("button",{onClick:()=>s.back(),className:"flex items-center text-muted-foreground hover:text-foreground touch-target",children:[r.jsx(p.Z,{className:"h-5 w-5 mr-1"}),"Back"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["running"===w.status?(0,r.jsxs)("button",{className:"flex items-center px-3 py-1.5 bg-red-500 text-white rounded-lg touch-target",children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Stop"]}):(0,r.jsxs)("button",{className:"flex items-center px-3 py-1.5 bg-primary text-primary-foreground rounded-lg touch-target",children:[r.jsx(c,{className:"h-4 w-4 mr-1"}),"Continue"]}),(0,r.jsxs)("button",{className:"flex items-center px-3 py-1.5 border border-border rounded-lg touch-target",children:[r.jsx(b,{className:"h-4 w-4 mr-1"}),"Merge"]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-semibold text-foreground truncate",children:w.name}),(0,r.jsxs)("div",{className:"flex items-center mt-1 space-x-3",children:[r.jsx("span",{className:(0,g.W)("text-sm font-medium",M),children:w.status.charAt(0).toUpperCase()+w.status.slice(1).replace("-"," ")}),r.jsx("span",{className:"text-sm text-muted-foreground",children:w.repoRoot.split("/").pop()}),w.iterations&&(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[w.iterations.length," iterations"]})]})]}),r.jsx("div",{className:"flex mt-4 -mb-4 border-b border-border",children:P.map(({id:e,label:s,icon:a})=>(0,r.jsxs)("button",{onClick:()=>l(e),className:(0,g.W)("flex-1 flex flex-col items-center pb-3 pt-1 touch-target transition-colors",t===e?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),children:[r.jsx(a,{className:"h-4 w-4 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:s})]},e))})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-hidden",children:["live"===t&&r.jsx(N,{session:w}),"diff"===t&&r.jsx(y,{sessionId:w.id}),"metrics"===t&&r.jsx(v,{session:w}),"history"===t&&r.jsx(k,{session:w})]}),r.jsx(o.K,{})]})}function N({session:e}){return(0,r.jsxs)("div",{className:"p-4 pb-20",children:[(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Session Prompt"}),r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.ampPrompt})]}),"running"===e.status&&(0,r.jsxs)("div",{className:"mt-4 bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Live Activity"}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(f,{className:"h-4 w-4 mr-2 animate-pulse"}),"Amp is working on your request..."]})]})]})}function y({sessionId:e}){let{data:s,isLoading:t}=(0,n.a)({queryKey:["session-diff",e],queryFn:()=>d.h.getSessionDiff(e)});if(t)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full"})});let a=s?.data;return r.jsx("div",{className:"p-4 pb-20",children:a?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,r.jsxs)("p",{children:[a.summary.totalFiles," files changed"]}),(0,r.jsxs)("p",{className:"text-green-600",children:["+",a.summary.totalAdditions," additions"]}),(0,r.jsxs)("p",{className:"text-red-600",children:["-",a.summary.totalDeletions," deletions"]})]})]}),a.files.map((e,s)=>(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:e.path}),r.jsx("span",{className:(0,g.W)("text-xs px-2 py-1 rounded","added"===e.status&&"bg-green-100 text-green-800","modified"===e.status&&"bg-blue-100 text-blue-800","deleted"===e.status&&"bg-red-100 text-red-800"),children:e.status})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{className:"text-green-600",children:["+",e.additions]}),r.jsx("span",{className:"mx-2",children:"â€¢"}),(0,r.jsxs)("span",{className:"text-red-600",children:["-",e.deletions]})]})]},s))]}):(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(m,{className:"h-12 w-12 mx-auto mb-2"}),r.jsx("p",{children:"No changes yet"})]})})}function v({session:e}){let s=e.iterations?.reduce((e,s)=>(s.metrics&&(e.tokens+=s.metrics.tokenUsage.total,e.cost+=s.metrics.costCents,e.duration+=s.metrics.durationMs),e),{tokens:0,cost:0,duration:0})||{tokens:0,cost:0,duration:0};return r.jsx("div",{className:"p-4 pb-20 space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Tokens"}),r.jsx("p",{className:"text-2xl font-bold",children:s.tokens.toLocaleString()})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Cost"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:["$",(s.cost/100).toFixed(2)]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Runtime"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[Math.round(s.duration/1e3/60),"m"]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Iterations"}),r.jsx("p",{className:"text-2xl font-bold",children:e.iterations?.length||0})]})]})})}function k({session:e}){return r.jsx("div",{className:"p-4 pb-20",children:e.iterations&&e.iterations.length>0?r.jsx("div",{className:"space-y-4",children:e.iterations.map((e,s)=>(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("h3",{className:"font-medium",children:["Iteration ",s+1]}),r.jsx("span",{className:(0,g.W)("text-xs px-2 py-1 rounded","completed"===e.status&&"bg-green-100 text-green-800","running"===e.status&&"bg-blue-100 text-blue-800","error"===e.status&&"bg-red-100 text-red-800"),children:e.status})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.prompt}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[new Date(e.startedAt).toLocaleString(),e.metrics&&(0,r.jsxs)("span",{className:"ml-2",children:["â€¢ ",e.metrics.tokenUsage.total," tokens â€¢ $",(e.metrics.costCents/100).toFixed(2)]})]})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(u.Z,{className:"h-12 w-12 mx-auto mb-2"}),r.jsx("p",{children:"No iterations yet"})]})})}},56:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(903).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3969:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2579).createProxy)(String.raw`/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/sessions/[id]/not-found.tsx#default`)},5668:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,dynamic:()=>n,dynamicParams:()=>i,generateStaticParams:()=>d});var r=t(2096);let a=(0,t(2579).createProxy)(String.raw`/Users/sjarmak/amp-workflow-manager-v2/apps/mobile/src/app/sessions/[id]/session-detail-client.tsx#SessionDetailClient`),n="force-dynamic",i=!0;async function d(){return[]}function o({params:e}){return r.jsx(a,{id:e.id})}},2096:(e,s,t)=>{"use strict";e.exports=t(7808).vendored["react-rsc"].ReactJsxRuntime}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[124,814,937,753],()=>t(4012));module.exports=r})();